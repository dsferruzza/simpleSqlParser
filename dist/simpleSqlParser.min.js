!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.simpleSqlParser=n()}}(function(){return function n(e,t,r){function i(u,o){if(!t[u]){if(!e[u]){var a="function"==typeof require&&require;if(!o&&a)return a(u,!0);if(s)return s(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var c=t[u]={exports:{}};e[u][0].call(c.exports,function(n){var t=e[u][1][n];return i(t?t:n)},c,c.exports,n,e,t,r)}return t[u].exports}for(var s="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(n,e){"use strict";e.exports.sql2ast=n("./src/sql2ast.js"),e.exports.ast2sql=n("./src/ast2sql.js")},{"./src/ast2sql.js":8,"./src/sql2ast.js":9}],2:[function(n,e){var t=n("pjs").P,r={};r.Parser=t(function(n,e,t){"use strict";function i(n,e){return{status:!0,index:n,value:e,furthest:-1,expected:""}}function s(n,e){return{status:!1,index:-1,value:null,furthest:n,expected:e}}function u(n,e){return e?n.furthest>=e.furthest?n:{status:n.status,index:n.index,value:n.value,furthest:e.furthest,expected:e.expected}:n}function o(n){if(!(n instanceof t))throw new Error("not a parser: "+n)}r.formatError=function(n,e){var t=e.expected,r=e.index;if(r===n.length)return"expected "+t+", got the end of the string";var i=r>0?"'...":"'",s=n.length-r>12?"...'":"'";return"expected "+t+" at character "+r+", got "+i+n.slice(r,r+12)+s};n.init=function(n){this._=n},n.parse=function(n){var e=this.skip(m)._(n,0);return e.status?{status:!0,value:e.value}:{status:!1,index:e.furthest,expected:e.expected}};var a=r.seq=function(){var n=[].slice.call(arguments),e=n.length;return t(function(t,r){for(var s,o=new Array(e),a=0;e>a;a+=1){if(s=u(n[a]._(t,r),s),!s.status)return s;o[a]=s.value,r=s.index}return u(i(r,o),s)})},p=(r.custom=function(n){return t(n(i,s))},r.alt=function(){var n=[].slice.call(arguments),e=n.length;return 0===e?f("zero alternates"):t(function(e,t){for(var r,i=0;i<n.length;i+=1)if(r=u(n[i]._(e,t),r),r.status)return r;return r})});n.or=function(n){return p(this,n)},n.then=function(n){if("function"==typeof n)throw new Error("chaining features of .then are no longer supported");return o(n),a(this,n).map(function(n){return n[1]})},n.many=function(){var n=this;return t(function(e,t){for(var r,s=[];;){if(r=u(n._(e,t),r),!r.status)return u(i(t,s),r);t=r.index,s.push(r.value)}})},n.times=function(n,e){arguments.length<2&&(e=n);var r=this;return t(function(t,s){for(var o,a,p=[],c=0;n>c;c+=1){if(o=r._(t,s),a=u(o,a),!o.status)return a;s=o.index,p.push(o.value)}for(;e>c&&(o=r._(t,s),a=u(o,a),o.status);c+=1)s=o.index,p.push(o.value);return u(i(s,p),a)})},n.result=function(n){return this.then(l(n))},n.atMost=function(n){return this.times(0,n)},n.atLeast=function(n){return a(this.times(n),this.many()).map(function(n){return n[0].concat(n[1])})},n.map=function(n){var e=this;return t(function(t,r){var s=e._(t,r);return s.status?u(i(s.index,n(s.value)),s):s})},n.skip=function(n){return a(this,n).map(function(n){return n[0]})},n.mark=function(){return a(h,this,h).map(function(n){return{start:n[0],value:n[1],end:n[2]}})},n.desc=function(n){return this.or(f(n))};var c=(r.string=function(n){var e=n.length,r="'"+n+"'";return t(function(t,u){var o=t.slice(u,u+e);return o===n?i(u+e,o):s(u,r)})},r.regex=function(n){var e=RegExp("^(?:"+n.source+")",(""+n).slice((""+n).lastIndexOf("/")+1));return t(function(t,r){var u=e.exec(t.slice(r));if(u){var o=u[0];return i(r+o.length,o)}return s(r,n)})}),l=r.succeed=function(n){return t(function(e,t){return i(t,n)})},f=r.fail=function(n){return t(function(e,t){return s(t,n)})},m=(r.letter=c(/[a-z]/i).desc("a letter"),r.letters=c(/[a-z]*/i),r.digit=c(/[0-9]/).desc("a digit"),r.digits=c(/[0-9]*/),r.whitespace=c(/\s+/).desc("whitespace"),r.optWhitespace=c(/\s*/),r.any=t(function(n,e){return e>=n.length?s(e,"any character"):i(e+1,n.charAt(e))}),r.all=t(function(n,e){return i(n.length,n.slice(e))}),r.eof=t(function(n,e){return e<n.length?s(e,"EOF"):i(e,null)})),h=(r.test=function(n){return t(function(e,t){var r=e.charAt(t);return t<e.length&&n(r)?i(t+1,r):s(t,"a character matching "+n)})},r.takeWhile=function(n){return t(function(e,t){for(var r=t;r<e.length&&n(e.charAt(r));)r+=1;return i(r,e.slice(t,r))})},r.lazy=function(n,e){arguments.length<2&&(e=n,n=void 0);var r=t(function(n,t){return r._=e()._,r._(n,t)});return n&&(r=r.desc(n)),r},r.index=t(function(n,e){return i(e,e)}));n.concat=n.or,n.empty=f("empty"),n.of=t.of=r.of=l,n.ap=function(n){return a(this,n).map(function(n){return n[0](n[1])})},n.chain=function(n){var e=this;return t(function(t,r){var i=e._(t,r);if(!i.status)return i;var s=n(i.value);return u(s._(t,i.index),i)})}}),e.exports=r},{pjs:5}],3:[function(n,e,t){e.exports=n("./build/parsimmon.commonjs"),t.version=n("./package.json").version},{"./build/parsimmon.commonjs":2,"./package.json":7}],4:[function(n,e,t){var r=function(n,e,t){return function r(i,s){function u(){var n=this instanceof u?this:new o;return n.init.apply(n,arguments),n}function o(){}s===t&&(s=i,i=Object),u.Bare=o;var a,p=o[n]=i[n],c=o[n]=u[n]=u.p=new o;return c.constructor=u,u.extend=function(n){return r(u,n)},(u.open=function(n){if("function"==typeof n&&(n=n.call(u,c,p,u,i)),"object"==typeof n)for(a in n)e.call(n,a)&&(c[a]=n[a]);return"init"in c||(c.init=i),u})(s)}}("prototype",{}.hasOwnProperty);t.P=r},{}],5:[function(n,e,t){t.P=n("./build/p.commonjs").P,t.version=n("./package.json").version},{"./build/p.commonjs":4,"./package.json":6}],6:[function(n,e){e.exports={name:"pjs",version:"5.1.1",description:"A lightweight class system.  It's just prototypes!",keywords:["class","pjs","P","inheritance","super"],author:{name:"Jeanine Adkisson",email:"jneen at jneen dot net"},repository:{type:"git",url:"git://github.com/jneen/pjs"},files:["index.js","src","test","Makefile","package.json","README.md","CHANGELOG.md","build/p.commonjs.js"],main:"index.js",devDependencies:{mocha:"*","uglify-js":"*"},scripts:{test:"make test"},bugs:{url:"https://github.com/jneen/pjs/issues"},homepage:"https://github.com/jneen/pjs",_id:"pjs@5.1.1",_shasum:"9dfc4673bb01deffd6915fb1dec75827aba42abf",_resolved:"https://registry.npmjs.org/pjs/-/pjs-5.1.1.tgz",_from:"pjs@5.x",_npmVersion:"1.4.14",_npmUser:{name:"jayferd",email:"jjmadkisson@gmail.com"},maintainers:[{name:"jayferd",email:"jjmadkisson@gmail.com"}],dist:{shasum:"9dfc4673bb01deffd6915fb1dec75827aba42abf",tarball:"http://registry.npmjs.org/pjs/-/pjs-5.1.1.tgz"},directories:{}}},{}],7:[function(n,e){e.exports={name:"parsimmon",version:"0.5.1",description:"A monadic LL(infinity) parser combinator library",keywords:["parsing","parse","parser combinators"],author:{name:"Jeanine Adkisson",email:"jneen at jneen dot net"},repository:{type:"git",url:"git://github.com/jneen/parsimmon"},files:["index.js","src","test","Makefile","package.json","build/parsimmon.commonjs.js","build/parsimmon.browser.js","build/parsimmon.browser.min.js"],main:"index.js",devDependencies:{mocha:"1.8.x",chai:"1.5.x","uglify-js":"2.x"},dependencies:{pjs:"5.x"},scripts:{test:"make test"},bugs:{url:"https://github.com/jneen/parsimmon/issues"},homepage:"https://github.com/jneen/parsimmon",_id:"parsimmon@0.5.1",_shasum:"247c970d7d5e99a51115b16a106de96f0eb9303b",_resolved:"https://registry.npmjs.org/parsimmon/-/parsimmon-0.5.1.tgz",_from:"parsimmon@0.5.1",_npmVersion:"1.4.14",_npmUser:{name:"jayferd",email:"jjmadkisson@gmail.com"},maintainers:[{name:"jayferd",email:"jjmadkisson@gmail.com"},{name:"jneen",email:"jneen@jneen.net"}],dist:{shasum:"247c970d7d5e99a51115b16a106de96f0eb9303b",tarball:"http://registry.npmjs.org/parsimmon/-/parsimmon-0.5.1.tgz"},directories:{}}},{}],8:[function(n,e){"use strict";e.exports=function(n){function e(n){var e="SELECT ";return e+=n.select.map(function(n){return n.expression}).join(", ")}function t(n){var e="FROM ";return e+=n.from.map(function(n){return n.expression}).join(", ")}function r(n){return n.join.map(function(n){var e="";if("inner"===n.type)e+="INNER JOIN ";else if("left"===n.type)e+="LEFT JOIN ";else{if("right"!==n.type)return"";e+="RIGHT JOIN "}return e+=n.table,null!==n.alias&&(e+=" AS "+n.alias),e+=" ON ",e+=n.condition.expression}).join(" ")}function i(n){var e="";return null!==n.where&&(e+="WHERE "+n.where.expression),e}function s(n){var e="";return n.group.length>0&&(e+="GROUP BY ",e+=n.group.map(function(n){return n.expression}).join(", ")),e}function u(n){var e="";return n.order.length>0&&(e+="ORDER BY ",e+=n.order.map(function(n){return n.expression}).join(", ")),e}function o(n){var e="";return null!==n.limit&&(e+="LIMIT ",null!==n.limit.from&&(e+=n.limit.from+", "),e+=n.limit.nb),e}function a(n){return"INSERT INTO "+n.into.expression}function p(n){var e="",t=n.values.filter(function(n){return null!==n.target});return t.length>0&&(e+="(",e+=t.map(function(n){return n.target.expression}).join(", "),e+=") "),e+="VALUES (",e+=n.values.map(function(n){return n.value}).join(", "),e+=")"}function c(n){return"UPDATE "+n.table.expression}function l(n){var e="SET ";return e+=n.values.map(function(n){return n.target.expression+" = "+n.value}).join(", ")}if("object"!=typeof n||n.status!==!0)return!1;n=n.value;var f=[];if("select"===n.type)f.push(e(n)),f.push(t(n)),f.push(r(n)),f.push(i(n)),f.push(s(n)),f.push(u(n)),f.push(o(n));else if("insert"===n.type)f.push(a(n)),f.push(p(n));else if("update"===n.type)f.push(c(n)),f.push(l(n)),f.push(i(n));else{if("delete"!==n.type)return!1;f.push("DELETE"),f.push(t(n)),f.push(i(n))}return f.filter(function(n){return""!==n}).join(" ")}},{}],9:[function(n,e){"use strict";function t(n,e){return"undefined"==typeof e&&(e=[]),n.or(a.succeed(e))}function r(n){return n.join("")}function i(n){return n[0].push(n[1]),n[0]}function s(n){return p(n.skip(m).skip(f(",")).skip(m).many(),n.skip(m)).map(i)}function u(n){return n.replace(/^([`'"])(.*)\1$/,"$2")}function o(n){return p(a.index,n,a.index).map(function(n){var e={start:n[0],end:n[2]};if("object"==typeof n[1]){var t=n[1];return t.position=e,t}return e.out=n[1],e})}var a=n("Parsimmon"),p=a.seq,c=a.alt,l=a.regex,f=a.string,m=a.optWhitespace,h=a.whitespace,d=a.lazy,j=c(l(/(?!(FROM|WHERE|GROUP BY|ORDER BY|LIMIT|INNER|LEFT|RIGHT|JOIN|ON|VALUES|SET)\s)[a-z*][a-z0-9_]*/i),l(/`[^`\\]*(?:\\.[^`\\]*)*`/)),g=c(l(/"[^"\\]*(?:\\.[^"\\]*)*"/),l(/'[^'\\]*(?:\\.[^'\\]*)*'/)),x=p(c(l(/[a-zA-Z0-9_]+\(/),f("(")),t(d(function(){return D})).map(r),f(")")).map(r),v=p(j,f("."),j),b=c(f("+"),f("-"),f("*"),f("/"),f("&&"),f("&"),f("~"),f("||"),f("|"),f("^"),l(/XOR/i),f("<=>"),f("="),f("!="),f(">="),f(">>"),f(">"),f("<="),f("<<"),f("<"),l(/IS NULL/i),l(/IS NOT/i),l(/IS NOT NULL/i),l(/IS/i),l(/LIKE/i),l(/NOT LIKE/i),f("%"),l(/MOD/i),l(/NOT/i),l(/OR\s/i),l(/AND/i),l(/IN/i)),y=l(/[-]?\d+\.?\d*/),E=p(f("("),m,p(c(y,g),m,t(f(",")),m,t(c(y,g))).map(r),m,f(")")).map(r),k=p(c(v.map(function(n){return{expression:n.join(""),table:u(n[0]),column:u(n[2])}}),x.map(function(n){return{expression:n,table:null,column:null}}),j.map(function(n){return{expression:n,table:null,column:u(n)}}),g.map(function(n){return{expression:n,table:null,column:null}}),y.map(function(n){return{expression:n,table:null,column:null}}),E.map(function(n){return{expression:n,table:null,column:null}})),t(p(m,b,t(p(m,d(function(){return k}).map(function(n){return n.expression})).map(r),null)).map(r),null)).map(function(n){return null!==n[1]?(n[0]=n[0].expression,{expression:n.join(""),table:null,column:null}):n[0]}),O=p(k,t(p(m,t(l(/AS\s/i)),c(j,g)).map(function(n){var e={};return e.alias=u(n[2]),e.expression=n.join(""),e}),null)).map(function(n){var e=n[0];return e.alias=null!==n[1]?n[1].alias:null,e.expression=e.expression+(null!==n[1]?n[1].expression:""),e}),I=k.map(function(n){return n.expression}),R=p(c(v.map(r),j),t(p(m,t(l(/AS\s/i)),c(j,g)).map(function(n){return{alias:u(n[2]),expression:n.join("")}}),null)).map(function(n){var e={};return e.table=n[0],e.alias=null!==n[1]?n[1].alias:null,e.expression=n[0]+(null!==n[1]?n[1].expression:""),e}),N=p(t(p(l(/INNER|LEFT|RIGHT/i),h).map(function(n){return n[0].toLowerCase()}),null),l(/JOIN/i),m,o(R),m,l(/ON/i),m,o(k)).map(function(n){var e={};return e.type=n[0]||"inner",e.table=n[3].table,e.alias=n[3].alias,e.position=n[3].position,e.condition={expression:n[7].expression,position:n[7].position},e}),_=o(k).map(function(n){return{expression:n.expression,position:n.position}}),w=p(k,t(p(m,l(/ASC|DESC/i)),null)).map(function(n){return{expression:n[0].expression+(null!==n[1]?n[1].join(""):""),order:null!==n[1]?n[1][1]:"ASC",table:n[0].table,column:n[0].column}}),T=p(y,t(p(m,f(","),m,y),null)).map(function(n){return null===n[1]?{from:null,nb:parseInt(n[0],10)}:{from:parseInt(n[0],10),nb:parseInt(n[1][3],10)}}),L=c(v.map(function(n){return{expression:n.join(""),column:u(n[2])}}),j.map(function(n){return{expression:n,column:u(n)}})),A=k.map(function(n){return n.expression}),S=p(L,m,f("="),m,k).map(function(n){return{target:n[0],value:n[4].expression}}),D=p(p(I,m,f(","),m).map(r).many(),I.skip(m)).map(i),P=s(o(O)),M=s(o(R)),U=s(o(k)),q=s(o(w)),z=m.then(N).skip(m).many(),F=s(L),H=s(A),C=s(S),G=p(l(/SELECT/i).skip(m).then(t(P)),l(/FROM/i).skip(m).then(t(M)),t(z),t(l(/WHERE/i).skip(m).then(t(_)),null),t(l(/\s?GROUP BY/i).skip(m).then(t(U))),t(l(/\s?ORDER BY/i).skip(m).then(t(q))),t(l(/\s?LIMIT/i).skip(m).then(t(T)),null)).map(function(n){return{type:"select",select:n[0],from:n[1],join:n[2],where:n[3],group:n[4],order:n[5],limit:n[6]}}),W=p(l(/INSERT INTO/i).skip(m).then(R),m,t(p(f("("),F,f(")")).map(function(n){return n[1]})),m,l(/VALUES\s?\(/i).skip(m).then(H),f(")")).map(function(n){for(var e=[],t=Math.max(n[2].length,n[4].length),r=0;t>r;++r)e[r]={target:n[2][r]||null,value:n[4][r]||null};return{type:"insert",into:n[0],values:e}}),B=p(l(/UPDATE/i).skip(m).then(R),m,l(/SET/i).skip(m).then(C),m,t(l(/WHERE/i).skip(m).then(t(_)),null)).map(function(n){return{type:"update",table:n[0],values:n[2],where:n[4]}}),J=p(l(/DELETE FROM/i).skip(m).then(t(M)),t(l(/WHERE/i).skip(m).then(t(_)),null)).map(function(n){return{type:"delete",from:n[0],where:n[1]}}),Y=c(G,W,B,J);e.exports=function(n){var e=Y.parse(n);return e.status===!1&&(e.error=a.formatError(n,e)),e}},{Parsimmon:3}]},{},[1])(1)});